import{r as i,e as me,w as ce,f as ue,_ as pe,b as y,o as u,g as s,h as t,t as c,Q as p,i as l,j as N,k,F as P,l as T,m as j,n as f,p as H,v as ge,q as K,s as fe,x as ve,y as ye,z as be}from"./index-BbDY3BAK.js";import{Q as F}from"./QInput-Cc8hJ2p6.js";import{u as Ce,Q as A,a as _,b as O,c as we,d as he,e as ke}from"./index-DG1KGejJ.js";import{Q as G}from"./QBadge-Bon83tZh.js";import{Q as _e,a as x}from"./QStepper-V_XF709Q.js";import{c as xe,h as V,Q as R,a as Ve,b as Qe,d as J}from"./moment-CUpEOa1l.js";import{Q as Se,C as U}from"./ClosePopup-CQBWc8F5.js";import{Q as W,a as v}from"./QCard-D4mbByQe.js";import{Q as De}from"./format-D-boY5Bs.js";import{b as X}from"./route-block-B_A1xBdJ.js";import"./private.use-form-Bu4A756w.js";import"./QLinearProgress-kofyjbu3.js";const Z={setup(){const g=Ce(),a=i(!1),z=i(!1),o=i(null),L=i(!0),Q=i(!1),e=i(1),m=i(1),S=i([]),D=i(),b=i([]),Y=i(),M=i(),C=i(),$=i(null),ee=i(null),q=i(""),n=me({page:1,limit:10}),ae=i(""),te=["Vehicles","Health","Term","Travel"],oe=i([{label:"Active",value:"active"},{label:"Inactive",value:"inactive"}]),le=[{name:"policyId",required:!0,label:"Policy ID",align:"left",field:"policyId"},{name:"policyCategory",align:"left",label:"Category",field:"policyCategory"},{name:"policySubCategory",align:"left",label:"Policy Name",field:"policySubCategory"},{name:"startDate",align:"left",label:"Policy Start Date",field:"startDate"},{name:"endDate",align:"left",label:"Policy End Date",field:"endDate"}],I=i([]),{showNotify:w,toTitleCase:E}=xe(),h=()=>{(n.category===null||n.category==="")&&delete n.category,(n.status===null||n.status==="")&&delete n.status,(n.createdOn===null||n.createdOn==="")&&delete n.createdOn,(n.search===null||n.search==="")&&delete n.search,S.value=[],g.fetchClaims(n).then(d=>{if(d?.status===200){if(d?.data.data.claims.length?I.value=d?.data.data.claims.map(r=>({id:r.id,policyId:r.policyId,policyCategory:E(r.policyCategory),policySubCategory:E(r.policySubCategory),startDate:V(r.startDate).format("YYYY-MM-DD"),endDate:V(r.endDate).format("YYYY-MM-DD"),expand:!1,status:r.status})):I.value=[],M.value=d?.data.data.totalCount,C.value=Math.ceil(M.value/n.limit),C.value)for(let r=1;r<=C.value;r++)S.value.push(r)}else w("error","Error while fetching claims list")})},se=d=>d<=V(new Date).format("YYYY/MM/DD"),ie=()=>{n.page=1,h(),a.value=!1},ne=d=>{switch(d){case"Submitted":return"Claim Submitted";case"Approved":return"Claim Approved";case"Rejected":return"Claim Rejected";case"Closed":return"Claim Closed";case"Claim Issued":return"Claim Issued";default:return d}},de=d=>{switch(d){case"Submitted":return"claimsubmitted";case"Approved":return"claimissued";case"Rejected":return"claimrejected";case"Closed":return"claimclosed";case"Claim Issued":return"claimissued";default:return d}};ce(()=>n.search,d=>{Y.value&&clearTimeout(Y.value),Y.value=setTimeout(()=>{n.page=1,h()},1e3)});const B=d=>{D.value=d,g.fetchRemarks(d).then(r=>{r?.status===200?(b.value=[],b.value=r.data.data.remarks):(b.value=[],w("error","Error while fetching remarks log"))}),Q.value=!0},re=()=>{let d={remark:q.value,claimId:parseInt(D.value)};g.addRemark(d).then(r=>{r?.status===200?(w("success","Remark added successfully"),q.value="",B(D.value)):w("error","Error while adding remark")})};return ue(()=>{h()}),{filterbutton:a,claimbutton:z,date:ae,category:ee,gotopage:$,gotopageOptions:S,currentPage:m,columns:le,rows:I,progress:e,remarkslogbutton:Q,hidePagination:L,categoryOptions:te,statusfilter:o,options:oe,payload:n,claimStatus:ne,totalCount:M,pagesCount:C,claimStatusClass:de,optionFnVal:se,applyFilter:ie,getClaimsList:h,fetchRemarks:B,remarksList:b,moment:V,textareaModel:q,enterRemark:re}}},Ye={class:"claimsContainer q-mx-md"},Me={class:"row justify-between q-mt-md"},qe={class:"pagetitle"},Ie={class:"rightelements"},Pe={class:"row"},Te={class:"row justify-between q-mt-xs"},je={class:"q-pa-sm customexpand"},Fe={class:"row justify-between"},Ae={class:"col-5"},Oe={class:"progress"},Re={class:"col text-end"},Ue={class:"row justify-end"},ze={class:"row justify-between q-mt-md"},Le={class:"col"},Ee={class:"row items-center"},Be={class:"col"},Ne={class:"row justify-end"},He={class:"row q-col-gutter-md q-pa-sm"},Ke={class:"col"},Ge={class:"col"},Je={class:"col"},We={class:"row justify-between"},Xe={class:"col"},Ze={key:0,class:"col text-right"},$e={class:"year"},ea={class:"row justify-end"};function aa(g,a,z,o,L,Q){return u(),y("div",Ye,[s("div",Me,[s("h1",qe,c(o.totalCount)+" Policies Found",1),s("div",Ie,[s("div",Pe,[t(p,{flat:"",ripple:!1,size:"md",class:"removeHover",color:"black",icon:"mdi-filter-variant",onClick:a[0]||(a[0]=e=>o.filterbutton=!0)}),t(F,{outlined:"",dense:"",modelValue:o.payload.search,"onUpdate:modelValue":a[1]||(a[1]=e=>o.payload.search=e),placeholder:"Search for Policy"},{prepend:l(()=>[t(N,{name:"mdi-magnify"})]),_:1},8,["modelValue"])])])]),s("div",Te,[t(we,{flat:"",bordered:"","hide-pagination":o.hidePagination,rows:o.rows,columns:o.columns,"row-key":"id","rows-per-page-options":[10]},{header:l(e=>[t(A,{props:e},{default:l(()=>[t(O,{"auto-width":""}),(u(!0),y(P,null,T(e.cols,m=>(u(),j(O,{key:m.name,props:e},{default:l(()=>[f(c(m.label),1)]),_:2},1032,["props"]))),128)),t(O,{"auto-width":"",class:"text-left"},{default:l(()=>[...a[16]||(a[16]=[f("Status",-1)])]),_:1})]),_:2},1032,["props"])]),body:l(e=>[t(A,{props:e},{default:l(()=>[t(_,{"auto-width":""},{default:l(()=>[t(p,{size:"sm",dense:"",flat:"",ripple:!1,class:"removeHover",onClick:m=>e.row.expand=!e.row.expand,icon:e.row.expand?"mdi-chevron-up":"mdi-chevron-down"},null,8,["onClick","icon"])]),_:2},1024),(u(!0),y(P,null,T(e.cols,m=>(u(),j(_,{key:m.name,props:e},{default:l(()=>[f(c(e.row[m.name]),1)]),_:2},1032,["props"]))),128)),t(_,{"auto-width":""},{default:l(()=>[t(G,{class:H(`${o.claimStatusClass(e.row.status)}-badge claims-badge`)},{default:l(()=>[f(c(o.claimStatus(e.row.status)),1)]),_:2},1032,["class"])]),_:2},1024)]),_:2},1032,["props"]),k(t(A,{props:e,class:"progress-container"},{default:l(()=>[t(_,{colspan:"100%",class:"q-td--no-hover"},{default:l(()=>[s("div",je,[a[17]||(a[17]=s("h6",{class:"expand-head"},"Progress",-1)),s("div",Fe,[s("div",Ae,[s("div",Oe,[t(_e,{modelValue:o.progress,"onUpdate:modelValue":a[2]||(a[2]=m=>o.progress=m),ref:"stepper",color:"primary",flat:"",dense:""},{default:l(()=>[t(x,{name:1,title:"Claim Submitted",caption:"21/06/2025",icon:"img:images/ClaimClosed.png","active-icon":"img:images/ClaimSubmitted.png","done-icon":"img:images/ClaimApproved.png",done:o.progress>1},null,8,["done"]),t(x,{name:2,title:"Approved",caption:"23/06/2025",icon:"img:images/ClaimClosed.png","active-icon":"img:images/ClaimSubmitted.png","done-icon":"img:images/ClaimApproved.png",done:o.progress>2},null,8,["done"]),t(x,{name:3,title:"Claim Issued",caption:"27/06/2025",icon:"img:images/ClaimClosed.png","active-icon":"img:images/ClaimSubmitted.png","done-icon":"img:images/ClaimApproved.png",done:o.progress>3},null,8,["done"]),t(x,{name:4,title:"Closed",caption:"28/06/2025",icon:"img:images/ClaimClosed.png","active-icon":"img:images/ClaimSubmitted.png","done-icon":"img:images/ClaimApproved.png",done:o.progress>4},null,8,["done"])]),_:1},8,["modelValue"])])]),s("div",Re,[s("div",Ue,[t(p,{flat:"",dense:"","no-caps":"",ripple:!1,class:"removeHover remark-btn",label:"View Remarks Log",icon:"mdi-sticker-text",onClick:m=>o.fetchRemarks(e.row.id)},null,8,["onClick"])])])])])]),_:2},1024)]),_:2},1032,["props"]),[[ge,e.row.expand]])]),_:1},8,["hide-pagination","rows","columns"])]),s("div",ze,[s("div",Le,[s("div",Ee,[a[18]||(a[18]=s("label",{class:"q-mr-sm"},"Go to page",-1)),t(R,{outlined:"",dense:"",modelValue:o.payload.page,"onUpdate:modelValue":[a[3]||(a[3]=e=>o.payload.page=e),a[4]||(a[4]=e=>o.getClaimsList())],options:o.gotopageOptions},null,8,["modelValue","options"])])]),s("div",Be,[s("div",Ne,[t(Se,{modelValue:o.payload.page,"onUpdate:modelValue":[a[5]||(a[5]=e=>o.payload.page=e),a[6]||(a[6]=e=>o.getClaimsList())],max:o.pagesCount,"rows-per-page":10,"direction-links":"",color:"black","active-design":"orange","active-color":"orange","active-text-color":"black"},null,8,["modelValue","max"])])])]),t(J,{modelValue:o.filterbutton,"onUpdate:modelValue":a[12]||(a[12]=e=>o.filterbutton=e),class:"custom-dialog"},{default:l(()=>[t(W,{style:{width:"700px","max-width":"80vw"}},{default:l(()=>[t(v,{class:"row items-center q-pb-none"},{default:l(()=>[a[19]||(a[19]=s("div",{class:"text-h6"},"Filter",-1)),t(K),k(t(p,{icon:"close",flat:"",round:"",dense:"",size:"sm"},null,512),[[U]])]),_:1}),t(v,null,{default:l(()=>[s("div",He,[s("div",Ke,[a[20]||(a[20]=s("label",{for:"category"},"Category",-1)),t(R,{outlined:"",dense:"",modelValue:o.payload.category,"onUpdate:modelValue":a[7]||(a[7]=e=>o.payload.category=e),options:o.categoryOptions},null,8,["modelValue","options"])]),s("div",Ge,[a[21]||(a[21]=s("label",{for:"dateofbirth"},"Created On",-1)),t(F,{modelValue:o.payload.createdOn,"onUpdate:modelValue":a[9]||(a[9]=e=>o.payload.createdOn=e),outlined:"",dense:""},{append:l(()=>[t(N,{name:"mdi-calendar-blank",class:"cursor-pointer"},{default:l(()=>[t(Ve,{cover:"","transition-show":"scale","transition-hide":"scale",class:"datePickerMenu"},{default:l(()=>[t(Qe,{modelValue:o.payload.createdOn,"onUpdate:modelValue":a[8]||(a[8]=e=>o.payload.createdOn=e),mask:"YYYY/MM/DD",options:o.optionFnVal,minimal:""},null,8,["modelValue","options"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),s("div",Je,[a[22]||(a[22]=s("label",{for:"dateofbirth"},"Status",-1)),t(R,{outlined:"",modelValue:o.payload.status,"onUpdate:modelValue":a[10]||(a[10]=e=>o.payload.status=e),options:o.options,dense:"","popup-content-class":"status-customfilter"},{option:l(e=>[t(fe,ve(e.itemProps,{dense:""}),{default:l(()=>[t(ye,null,{default:l(()=>[t(De,null,{default:l(()=>[f(c(e.opt.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options"])])])]),_:1}),t(v,{class:"row items-center q-pb-none justify-end q-col-gutter-x-sm"},{default:l(()=>[k(t(p,{flat:"",dense:"",label:"Clear","no-caps":"",size:"md",class:"custombtn close-btn q-mr-sm"},null,512),[[U]]),t(p,{flat:"",dense:"",label:"Apply","no-caps":"",size:"md",class:"custombtn apply-btn",onClick:a[11]||(a[11]=e=>o.applyFilter())})]),_:1})]),_:1})]),_:1},8,["modelValue"]),t(J,{modelValue:o.remarkslogbutton,"onUpdate:modelValue":a[15]||(a[15]=e=>o.remarkslogbutton=e),class:"custom-dialog"},{default:l(()=>[t(W,{style:{width:"500px","max-width":"80vw"}},{default:l(()=>[t(v,{class:"row items-center q-pb-none"},{default:l(()=>[a[23]||(a[23]=s("div",{class:"text-h6"},"Remark Log",-1)),t(K),k(t(p,{icon:"close",label:"Close",class:"removeHover","no-caps":"",flat:"",round:"",dense:"",size:"sm"},null,512),[[U]])]),_:1}),t(v,{style:{"max-height":"50vh"},class:"scroll custom-timeline"},{default:l(()=>[t(he,{layout:"loose",side:"right"},{default:l(()=>[(u(!0),y(P,null,T(o.remarksList,e=>(u(),j(ke,{key:e.id},{title:l(()=>[s("div",We,[s("div",Xe,c(e.user),1),e.status?(u(),y("div",Ze,[t(G,{class:H(`claims-badge ${o.claimStatusClass(e.status)}-badge`)},{default:l(()=>[f(c(e.status),1)]),_:2},1032,["class"])])):be("",!0)])]),subtitle:l(()=>[f(c(o.moment(e.createdAt).format("DD MMM"))+" ",1),s("span",$e,c(o.moment(e.createdAt).format("YYYY")),1)]),default:l(()=>[s("div",null,c(e.remarks),1)]),_:2},1024))),128))]),_:1})]),_:1}),t(v,null,{default:l(()=>[t(F,{modelValue:o.textareaModel,"onUpdate:modelValue":a[13]||(a[13]=e=>o.textareaModel=e),outlined:"",class:"q-mb-md",type:"textarea",rows:"3",placeholder:"Enter text here...","shadow-text":g.textareaShadowText,onKeydown:g.processTextareaFill,onFocus:g.processTextareaFill},null,8,["modelValue","shadow-text","onKeydown","onFocus"]),s("div",ea,[t(p,{flat:"",dense:"",label:"Enter","no-caps":"",size:"md",class:"enterbtn",disabled:!o.textareaModel.trim(),onClick:a[14]||(a[14]=e=>o.enterRemark())},null,8,["disabled"])])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}typeof X=="function"&&X(Z);const ga=pe(Z,[["render",aa]]);export{ga as default};
