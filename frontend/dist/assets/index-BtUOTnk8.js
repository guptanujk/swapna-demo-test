import{r as i,e as G,w as J,f as K,_ as W,a6 as X,b as _,o as k,g as l,h as a,t as r,Q as m,i as s,k as P,q as F,j as T,s as Z,x as $,y as ee,n as Q,F as te,l as le,p as oe}from"./index-BbDY3BAK.js";import{Q as Y,a as u}from"./QCard-D4mbByQe.js";import{c as ae,h as M,Q as q,a as se,b as ne,d as U}from"./moment-CUpEOa1l.js";import{Q as D}from"./QInput-Cc8hJ2p6.js";import{Q as ie}from"./format-D-boY5Bs.js";import{Q as de}from"./QBadge-Bon83tZh.js";import{C as S,a as re,Q as me}from"./ClosePopup-CQBWc8F5.js";import{u as ce}from"./index-BC6vbAHl.js";import{b as O}from"./route-block-B_A1xBdJ.js";import"./private.use-form-Bu4A756w.js";const z={setup(){const v=i([]),e=i(),f=i(),t=i(),b=i(!1),g=i(""),c=i(0),o=i([]),y=i(!1),w=i(),C=i(0),I=ce(),V=i(),n=G({page:1,limit:10}),j=i([{label:"Active",value:"active"},{label:"Inactive",value:"inactive"}]),N=i([{label:"Vehicles",value:"vehicles"},{label:"Health",value:"health"},{label:"Term",value:"term"},{label:"Travel",value:"travel"}]),{showNotify:h,toTitleCase:L}=ae();J(()=>n.search,d=>{V.value&&clearTimeout(V.value),V.value=setTimeout(()=>{n.page=1,x()},1e3)});const R=d=>d<=M(new Date).format("YYYY/MM/DD"),A=()=>{e.value=n.category,f.value=n.createdOn,t.value=n.status,b.value=!0},B=()=>{n.category=e.value,n.createdOn=f.value,n.status=t.value,n.search||delete n.search,n.category||delete n.category,n.createdOn||delete n.createdOn,n.status||delete n.status,b.value=!1,x()},H=()=>{e.value=null,f.value=null,t.value=null},x=()=>{o.value=[],I.getPolicys(n).then(d=>{if(d?.status===200){if(v.value=d.data.data.policies,C.value=d.data.data.totalCount,c.value=Math.ceil(C.value/n.limit),c.value)for(let p=1;p<=c.value;p++)o.value.push(p)}else h("error","Something went wrong while fetching data")})},E=()=>{let d={userPolicyId:parseInt(w.value)};g.value&&(d.remark=g.value),I.raiseClaim(d).then(p=>{p?.status===200?(h("success","Claim submitted successfully"),y.value=!1):h("error","Something went wrong while submitting claim")})};return K(()=>{x()}),{policyPayload:n,optionFnVal:R,filterbutton:b,claimbutton:y,categoryOptions:N,policyList:v,pagesList:o,pagesCount:c,moment:M,toTitleCase:L,totalCount:C,filterCategory:e,filterDate:f,filterStatus:t,openFilter:A,applyFilter:B,getPolicies:x,options:j,resetForm:H,submitClaim:E,claimRemarks:g,currentID:w}}},ue={class:"policyContainer q-mx-md"},fe={class:"row justify-between q-mt-md"},pe={class:"pagetitle"},ve={class:"rightelements"},be={class:"row"},ge={class:"row q-col-gutter-md q-pa-sm"},ye={class:"col"},xe={class:"col"},we={class:"col"},Ce={class:"row justify-between q-mt-xs"},Ve={class:"text-left"},he={class:"text-left"},_e={class:"text-left"},ke={class:"text-left"},Pe={class:"text-left"},Qe={class:"text-left"},qe={class:"text-left"},De={class:"text-left"},Se={class:"row justify-between q-mt-md"},Ie={class:"col"},Fe={class:"row items-center"},Te={class:"col"},Ye={class:"row justify-end"},Me={class:"row q-col-gutter-md q-pa-sm"},Ue={class:"col"};function Oe(v,e,f,t,b,g){const c=X("text-h6");return k(),_("div",ue,[l("div",fe,[l("h1",pe,r(t.totalCount)+" Policies Found",1),l("div",ve,[l("div",be,[a(m,{flat:"",ripple:!1,size:"md",class:"removeHover",color:"black",icon:"mdi-filter-variant",onClick:e[0]||(e[0]=o=>t.openFilter())}),a(U,{modelValue:t.filterbutton,"onUpdate:modelValue":e[6]||(e[6]=o=>t.filterbutton=o),class:"custom-dialog"},{default:s(()=>[a(Y,{style:{width:"700px","max-width":"80vw"}},{default:s(()=>[a(u,{class:"row items-center q-pb-none"},{default:s(()=>[e[15]||(e[15]=l("div",{class:"text-h6"},"Filter",-1)),a(F),P(a(m,{icon:"close",flat:"",round:"",dense:"",size:"sm"},null,512),[[S]])]),_:1}),a(u,null,{default:s(()=>[l("div",ge,[l("div",ye,[e[16]||(e[16]=l("label",{for:"category"},"Category",-1)),a(q,{outlined:"",dense:"",modelValue:t.filterCategory,"onUpdate:modelValue":e[1]||(e[1]=o=>t.filterCategory=o),options:t.categoryOptions,"emit-value":"","map-options":""},null,8,["modelValue","options"])]),l("div",xe,[e[17]||(e[17]=l("label",{for:"dateofbirth"},"Created On",-1)),a(D,{modelValue:t.filterDate,"onUpdate:modelValue":e[3]||(e[3]=o=>t.filterDate=o),outlined:"",dense:""},{append:s(()=>[a(T,{name:"mdi-calendar-blank",class:"cursor-pointer"},{default:s(()=>[a(se,{cover:"","transition-show":"scale","transition-hide":"scale",class:"datePickerMenu"},{default:s(()=>[a(ne,{modelValue:t.filterDate,"onUpdate:modelValue":e[2]||(e[2]=o=>t.filterDate=o),mask:"YYYY/MM/DD",options:t.optionFnVal,minimal:""},null,8,["modelValue","options"])]),_:1})]),_:1})]),_:1},8,["modelValue"])]),l("div",we,[e[18]||(e[18]=l("label",{for:"dateofbirth"},"Status",-1)),a(q,{outlined:"",modelValue:t.filterStatus,"onUpdate:modelValue":e[4]||(e[4]=o=>t.filterStatus=o),options:t.options,"option-label":"label","option-value":"value","emit-value":"","map-options":"",dense:"","popup-content-class":"status-customfilter"},{option:s(o=>[a(Z,$(o.itemProps,{dense:""}),{default:s(()=>[a(ee,null,{default:s(()=>[a(ie,null,{default:s(()=>[Q(r(o.opt.label),1)]),_:2},1024)]),_:2},1024)]),_:2},1040)]),_:1},8,["modelValue","options"])])])]),_:1}),a(u,{class:"row items-center q-pb-none justify-end q-col-gutter-x-sm"},{default:s(()=>[a(m,{flat:"",dense:"",label:"Clear","no-caps":"",size:"md",class:"custombtn close-btn q-mr-sm",onClick:e[5]||(e[5]=o=>t.resetForm())}),a(m,{flat:"",dense:"",label:"Apply","no-caps":"",size:"md",class:"custombtn apply-btn",onClick:t.applyFilter},null,8,["onClick"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),a(D,{outlined:"",dense:"",modelValue:t.policyPayload.search,"onUpdate:modelValue":e[7]||(e[7]=o=>t.policyPayload.search=o),placeholder:"Search for Policy"},{prepend:s(()=>[a(T,{name:"mdi-magnify"})]),_:1},8,["modelValue"])])])]),l("div",Ce,[a(re,{flat:"",bordered:""},{default:s(()=>[e[19]||(e[19]=l("thead",null,[l("tr",null,[l("th",{class:"text-left"},"Policy ID"),l("th",{class:"text-left"},"Category"),l("th",{class:"text-left"},"Policy Name"),l("th",{class:"text-left"},"Created On"),l("th",{class:"text-left"},"Email ID"),l("th",{class:"text-left"},"Phone No."),l("th",{class:"text-center"},"Status"),l("th",{class:"text-left"},"IRA")])],-1)),l("tbody",null,[(k(!0),_(te,null,le(t.policyList,(o,y)=>(k(),_("tr",{key:y},[l("td",Ve,r(o.policyId),1),l("td",he,r(t.toTitleCase(o.policyCategory)),1),l("td",_e,r(t.toTitleCase(o.policySubCategory)),1),l("td",ke,r(t.moment(o.createdAt).format("YYYY-MM-DD")),1),l("td",Pe,r(o.email),1),l("td",Qe,r(o.phoneNumber),1),l("td",qe,[a(de,{class:oe(`${o.status=="active"?"activebadge":"inactivebadge"} custombadge`)},{default:s(()=>[Q(r(t.toTitleCase(o.status)),1)]),_:2},1032,["class"])]),l("td",De,[a(m,{flat:"",dense:"",class:"link removeHover",ripple:!1,"no-caps":"",label:"Claim",onClick:w=>(t.currentID=o.id,t.claimRemarks="",t.claimbutton=!0)},null,8,["onClick"]),a(m,{flat:"",dense:"",icon:"mdi-download",class:"downloadbtn q-ml-sm"})])]))),128))])]),_:1})]),l("div",Se,[l("div",Ie,[l("div",Fe,[e[20]||(e[20]=l("label",{class:"q-mr-sm"},"Go to page",-1)),a(q,{outlined:"",dense:"",modelValue:t.policyPayload.page,"onUpdate:modelValue":[e[8]||(e[8]=o=>t.policyPayload.page=o),e[9]||(e[9]=o=>t.getPolicies())],options:t.pagesList},null,8,["modelValue","options"])])]),l("div",Te,[l("div",Ye,[a(me,{modelValue:t.policyPayload.page,"onUpdate:modelValue":[e[10]||(e[10]=o=>t.policyPayload.page=o),e[11]||(e[11]=o=>t.getPolicies())],max:t.pagesCount,"direction-links":"",color:"black","active-design":"orange","active-color":"orange","active-text-color":"black"},null,8,["modelValue","max"])])])]),a(U,{modelValue:t.claimbutton,"onUpdate:modelValue":e[14]||(e[14]=o=>t.claimbutton=o),class:"custom-dialog"},{default:s(()=>[a(Y,{style:{width:"700px","max-width":"80vw"}},{default:s(()=>[a(u,{class:"row items-center q-pb-none"},{default:s(()=>[e[21]||(e[21]=l("div",{class:"text-h6"},"Claim Insurance",-1)),a(F),P(a(m,{icon:"close",flat:"",round:"",dense:"",size:"sm"},null,512),[[S]])]),_:1}),a(u,null,{default:s(()=>[l("div",Me,[l("div",Ue,[e[23]||(e[23]=l("label",{for:"remarks"},"Remarks (Optional)",-1)),a(D,{modelValue:t.claimRemarks,"onUpdate:modelValue":e[12]||(e[12]=o=>t.claimRemarks=o),outlined:"",class:"q-mb-md",autogrow:"","shadow-text":v.textareaShadowText},null,8,["modelValue","shadow-text"]),a(c,{class:"text-weight-bold"},{default:s(()=>[...e[22]||(e[22]=[Q(" Are you sure you want to claim the insurance? ",-1)])]),_:1})])])]),_:1}),a(u,{class:"row items-center q-pb-none justify-end q-col-gutter-x-sm"},{default:s(()=>[P(a(m,{flat:"",dense:"",label:"Cancel","no-caps":"",size:"md",class:"custombtn close-btn q-mr-sm"},null,512),[[S]]),a(m,{flat:"",dense:"",label:"Confirm","no-caps":"",size:"md",class:"custombtn apply-btn",onClick:e[13]||(e[13]=o=>t.submitClaim())})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}typeof O=="function"&&O(z);const Je=W(z,[["render",Oe]]);export{Je as default};
