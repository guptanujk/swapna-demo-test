import{A as F,r as P,ab as Z,aa as q,f as z,J as C,a2 as $,a4 as R,aZ as w,a5 as g,ao as B,a_ as I,av as O,a$ as V}from"./index-BbDY3BAK.js";const j=F({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(t,{slots:S,emit:d}){const E=C(),i=P(null);let u=0;const s=[];function f(e){const r=typeof e=="boolean"?e:t.noErrorFocus!==!0,l=++u,x=(a,o)=>{d(`validation${a===!0?"Success":"Error"}`,o)},y=a=>{const o=a.validate();return typeof o.then=="function"?o.then(n=>({valid:n,comp:a}),n=>({valid:!1,comp:a,err:n})):Promise.resolve({valid:o,comp:a})};return(t.greedy===!0?Promise.all(s.map(y)).then(a=>a.filter(o=>o.valid!==!0)):s.reduce((a,o)=>a.then(()=>y(o).then(n=>{if(n.valid===!1)return Promise.reject(n)})),Promise.resolve()).catch(a=>[a])).then(a=>{if(a===void 0||a.length===0)return l===u&&x(!0),!0;if(l===u){const{comp:o,err:n}=a[0];if(n!==void 0&&console.error(n),x(!1,o),r===!0){const p=a.find(({comp:A})=>typeof A.focus=="function"&&w(A.$)===!1);p!==void 0&&p.comp.focus()}}return!1})}function m(){u++,s.forEach(e=>{typeof e.resetValidation=="function"&&e.resetValidation()})}function v(e){e!==void 0&&g(e);const r=u+1;f().then(l=>{r===u&&l===!0&&(t.onSubmit!==void 0?d("submit",e):e?.target!==void 0&&typeof e.target.submit=="function"&&e.target.submit())})}function b(e){e!==void 0&&g(e),d("reset"),B(()=>{m(),t.autofocus===!0&&t.noResetFocus!==!0&&c()})}function c(){I(()=>{if(i.value===null)return;(i.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||i.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||i.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(i.value.querySelectorAll("[tabindex]"),r=>r.tabIndex!==-1))?.focus({preventScroll:!0})})}O(V,{bindComponent(e){s.push(e)},unbindComponent(e){const r=s.indexOf(e);r!==-1&&s.splice(r,1)}});let h=!1;return Z(()=>{h=!0}),q(()=>{h===!0&&t.autofocus===!0&&c()}),z(()=>{t.autofocus===!0&&c()}),Object.assign(E.proxy,{validate:f,resetValidation:m,submit:v,reset:b,focus:c,getValidationComponents:()=>s}),()=>$("form",{class:"q-form",ref:i,onSubmit:v,onReset:b},R(S.default))}}),D=[t=>!!t||"",t=>/[A-Za-z0-9]+@[A-Za-z]+\.[A-Za-z]{2,3}/.test(t)||"Please Enter a valid email address"],N=t=>!!t||"This field is required",T=[t=>/^\S*$/.test(t)||"No spaces are allowed in the password",t=>!!t||"One A-Z and a-z and 0-9 and min 8 and max 15 characters",t=>/^(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])(?=.*[!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~])[a-zA-Z0-9!"#$%&'()*+,-./:;<=>?@[\]^_`{|}~]{8,15}$/.test(t)||"One A-Z, a-z, 0-9, special character and min 8 and max 15 characters"];export{j as Q,D as e,T as p,N as r};
